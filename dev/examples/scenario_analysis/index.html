<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scenario Analysis ¬∑ EarthSciML</title><meta name="title" content="Scenario Analysis ¬∑ EarthSciML"/><meta property="og:title" content="Scenario Analysis ¬∑ EarthSciML"/><meta property="twitter:title" content="Scenario Analysis ¬∑ EarthSciML"/><meta name="description" content="Documentation for EarthSciML."/><meta property="og:description" content="Documentation for EarthSciML."/><meta property="twitter:description" content="Documentation for EarthSciML."/><meta property="og:url" content="earthsci.dev/examples/scenario_analysis/"/><meta property="twitter:url" content="earthsci.dev/examples/scenario_analysis/"/><link rel="canonical" href="earthsci.dev/examples/scenario_analysis/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="EarthSciML logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EarthSciML</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../quickstart/getting_started/">Overview</a></li><li><a class="tocitem" href="../../quickstart/prepare_environment/">Preparing Your Environment</a></li><li><a class="tocitem" href="../../quickstart/using_mtk/">Using ModelingToolkit</a></li><li><a class="tocitem" href="../../quickstart/using_earthsciml/">Using EarthSciML</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../overview/">Overview</a></li><li class="is-active"><a class="tocitem" href>Scenario Analysis</a></li></ul></li><li><span class="tocitem">Libraries</span><ul><li><a class="tocitem" href="../../libraries/overview/">Overview</a></li><li><a class="tocitem" href="../../libraries/base/">üîó EarthSciMLBase.jl</a></li><li><a class="tocitem" href="../../libraries/gaschem/">üîó GasChem.jl</a></li><li><a class="tocitem" href="../../libraries/aerosol/">üîó Aerosol.jl</a></li><li><a class="tocitem" href="../../libraries/deposition/">üîó AtmosphericDeposition.jl</a></li><li><a class="tocitem" href="../../libraries/transport/">üîó EnvironmentalTransport.jl</a></li><li><a class="tocitem" href="../../libraries/data/">üîó EarthSciData.jl</a></li></ul></li><li><span class="tocitem">EarthSci EDU</span><ul><li><a class="tocitem" href="../../edu/overview/">Overview</a></li><li><a class="tocitem" href="../../edu/atmos_chem/">Atmospheric Chemistry</a></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Scenario Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scenario Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EarthSciML/earthsci.dev" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EarthSciML/earthsci.dev/blob/main/src/examples/scenario_analysis.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scenario-Analysis"><a class="docs-heading-anchor" href="#Scenario-Analysis">Scenario Analysis</a><a id="Scenario-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Scenario-Analysis" title="Permalink"></a></h1><p>A common application in geoscientific modeling is conducting scenario analysis: comparing the results of a model under different sets of assumptions or conditions. In this example, we will demonstrate how to use EarthSciML to conduct a simple scenario analysis, comparing the results of a model of atmospheric chemistry under two different sets of emissions.</p><p>First, we create a base model containing all the components that will be shared between the two scenarios. This model is similar to the one described in detail in <a href="../../quickstart/using_earthsciml/#Using-EarthSciML">Using EarthSciML</a>, including a gas-phase chemistry model, a photolysis model, emissions data, and meteorological data:</p><pre><code class="language-julia hljs">using EarthSciMLBase, GasChem, AtmosphericDeposition, EarthSciData
using EnvironmentalTransport, ModelingToolkit, OrdinaryDiffEq
using Dates, Plots, NCDatasets
using ProgressLogging # Needed for progress bar. Use `TerminalLoggers` if in a terminal.

domain = DomainInfo(
    DateTime(2016, 5, 1),
    DateTime(2016, 5, 1, 6);
    lonrange = deg2rad(-115):deg2rad(2.5):deg2rad(-68.75),
    latrange = deg2rad(25):deg2rad(2):deg2rad(53.7),
    levrange = 1:15,
    dtype = Float64)

geosfp = GEOSFP(&quot;0.5x0.625_NA&quot;, domain; stream=false)
geosfp = EarthSciMLBase.copy_with_change(geosfp, discrete_events=[]) # Workaround for bug.

emis = NEI2016MonthlyEmis(&quot;mrggrid_withbeis_withrwc&quot;, domain; stream=false)
emis = EarthSciMLBase.copy_with_change(emis, discrete_events=[]) # Workaround for bug.

dt = 300.0 # Operator splitting timestep

base_model = couple(
    SuperFast(),
    FastJX(),
    #DrydepositionG(), Not currently working
    Wetdeposition(),
    AdvectionOperator(dt, upwind1_stencil, ZeroGradBC()),
    emis,
    geosfp,
    domain
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">CoupledSystem containing 5 system(s), 1 operator(s), and 0 callback(s).</code></pre><p>Once we&#39;ve created a base model, we can then add in the components that will be unique to each scenario. In this case, we will create two scenarios: a &quot;business as usual&quot; scenario and a &quot;reduced emissions&quot; scenario. For our business as usual scenario, the only component we need to add is one that writes the model output to a file called <code>bau_output.nc</code>.</p><pre><code class="language-julia hljs">bau_outfile = (&quot;RUNNER_TEMP&quot; ‚àà keys(ENV) ? ENV[&quot;RUNNER_TEMP&quot;] : tempname()) * &quot;bau_output.nc&quot; # This is just a location to save the output.
bau_model = couple(base_model, NetCDFOutputter(bau_outfile, 3600.0))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">CoupledSystem containing 5 system(s), 1 operator(s), and 1 callback(s).</code></pre><p>In this case, we want to explore the impacts of a 30% reduction in emissions from the &quot;onroad&quot; sector. To do this, we initialize a new emissions component only containing the emissions from the onroad sector, and we specify a scale factor of -0.3, which when added to the total emissions from all sectors that are already present in the base model represents the total emissions minus 30% of the onroad emissions. (Additional information about the emissions data we&#39;re using is available <a href="https://data.earthsci.dev/dev/api/#EarthSciData.NEI2016MonthlyEmis-Tuple{AbstractString,%20EarthSciMLBase.DomainInfo}">here</a>.) We also create a component that writes the model output to a file called <code>scenario_output.nc</code>, and then we couple both of these components to the base model to create the scenario model.</p><pre><code class="language-julia hljs">@named scenario_emis = NEI2016MonthlyEmis(&quot;onroad&quot;, domain; scale=-0.3, stream=false)
scenario_emis = EarthSciMLBase.copy_with_change(scenario_emis, discrete_events=[]) # Workaround for bug.


scenario_outfile = (&quot;RUNNER_TEMP&quot; ‚àà keys(ENV) ? ENV[&quot;RUNNER_TEMP&quot;] : tempname()) * &quot;scenario_output.nc&quot;
scenario_model = couple(base_model, scenario_emis, NetCDFOutputter(scenario_outfile, 3600.0))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">CoupledSystem containing 6 system(s), 1 operator(s), and 1 callback(s).</code></pre><p>Once we&#39;ve configured both of out models, we can run them both as described in <a href="../../quickstart/using_earthsciml/#Using-EarthSciML">Using EarthSciML</a> above:</p><pre><code class="language-julia hljs">st = SolverStrangSerial(Rosenbrock23(autodiff=false), dt)

bau_prob = ODEProblem(bau_model, st; tspan=BigFloat.(get_tspan(domain)))
sol = solve(bau_prob, SSPRK22(); dt=dt, progress=true, progress_steps=1,
    save_on=false, save_start=false, save_end=false, initialize_save=false)


scenario_prob = ODEProblem(scenario_model, st; tspan=BigFloat.(get_tspan(domain)))
sol = solve(scenario_prob, SSPRK22(); dt=dt, progress=true, progress_steps=1,
    save_on=false, save_start=false, save_end=false, initialize_save=false)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for PS failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for T failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for PFLCU failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for PFLLSAN failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for CLOUD failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for OMEGA failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for U failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for V failed at t=2016-05-01T00:00:00, locs=(-1.6144295580947547, 0.6806784082777885, 8.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for NO failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for NO2 failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for FORM failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for CO failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for ISOP failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for PS failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for T failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for PFLCU failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for PFLLSAN failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for CLOUD failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for OMEGA failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for U failed at t=2016-05-01T00:00:00, locs=(-2.028945255443408, 0.4363323129985824, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for V failed at t=2016-05-01T00:00:00, locs=(-2.007128639793479, 0.41887902047863906, 1.0); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for NO failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for NO2 failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for FORM failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for CO failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for ISOP failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for NO failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for NO2 failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for FORM failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for CO failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span>
<span class="sgr33"><span class="sgr1">‚îå Warning: </span></span>Interpolation for ISOP failed at t=2016-05-01T00:00:00, locs=(-1.8444838912033397e6, -1.490715922338971e6); trying to update interpolator.
<span class="sgr33"><span class="sgr1">‚îî </span></span><span class="sgr90">@ EarthSciData ~/.julia/packages/EarthSciData/De7GX/src/load.jl:420</span></code></pre><p>One the simulations are complete, we can compare the results of the two scenarios.  In this case, we&#39;ll create an animation that shows the difference in ground-level ozone concentrations between the two scenarios at each time step:</p><pre><code class="language-julia hljs">bau_data = NCDataset(bau_outfile, &quot;r&quot;);
scenario_data = NCDataset(scenario_outfile, &quot;r&quot;);

anim = @animate for i ‚àà 1:size(bau_data[&quot;SuperFast‚ÇäO3&quot;])[4]
    Plots.plot(
        Plots.heatmap(bau_data[&quot;SuperFast‚ÇäO3&quot;][:, :, 1, i]&#39;, title=&quot;Business as Usual&quot;),
        Plots.heatmap(scenario_data[&quot;SuperFast‚ÇäO3&quot;][:, :, 1, i]&#39;, title=&quot;Scenario&quot;),
        Plots.heatmap(scenario_data[&quot;SuperFast‚ÇäO3&quot;][:, :, 1, i]&#39; -
            bau_data[&quot;SuperFast‚ÇäO3&quot;][:, :, 1, i]&#39;, title=&quot;Difference&quot;),
        size=(1900, 400), layout=(1, 3)
    )
end
gif(anim, fps = 5)</code></pre><img src="eecd2725.gif" alt="Example block output"/><p>You can see that in this case, the scenario with reduced emissions actually results in an increase on ozone concentrations during the short simulation time that we run. Can you think of any way to use the models above to explore why this might be happening?</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../overview/">¬´ Overview</a><a class="docs-footer-nextpage" href="../../libraries/overview/">Overview ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Sunday 26 January 2025 19:46">Sunday 26 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
